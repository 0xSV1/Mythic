{% extends "base.html" %}

{% block body %}
<h2>Database and File Management</h2>
<div style="resize: vertical; overflow:visible" class="panel panel-primary" id="database_table">
    <div class="panel-heading">Database Information</div>
        <table class="table table-striped table-hover table-condensed" >
            <tr>
                <td></td>
                <td><b>Management Item</b></td>
            </tr>
            <tr>
                <td>
                    <button type="button" class="btn btn-danger btn-md" onclick="clear_operators()">Clear</button>
                </td>
                <td>
                    <h4>Operators</h4>
                </td>
            </tr>
            <tr>
                <td>
                    <button type="button" class="btn btn-danger btn-md" onclick="clear_tables()">Clear</button>
                </td>
                <td>
                    <h4>Registered Payloads, Callbacks, Tasks, Responses, C2Profiles</h4>
                </td>
            </tr>
            <tr>
                <td>
                    <button type="button" class="btn btn-danger btn-md" onclick="clear_operation_files()">Clear</button>
                </td>
                <td>
                    <h4>Operation's Auto-generated Files</h4>
                </td>
            </tr>
        </table>
</div>
<!-- THIS IS OUR MODAL FOR OPERATOR CLEARING -->
<div class="modal fade bs-example-modal-sm" id="clearOperatorModal" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3>Are you sure?</h3>
            </div>
              <div class="modal-body" id="clearOperatorBody">
                  This will remove all operators from the database, you will need to re-create your account!
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <button class="btn btn-danger" data-dismiss="modal" id="clearOperatorSubmit">Yes</button>
              </div>
        </div>
    </div>
</div>
<!-- END MODAL FOR OPERATOR CLEARING -->
<!-- THIS IS OUR MODAL FOR TABLES CLEARING -->
<div class="modal fade bs-example-modal-sm" id="clearTablesModal" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3>Are you sure?</h3>
            </div>
              <div class="modal-body" id="clearTablesBody">
                  This will remove all data from the database except for the operators. This cannot be undone!
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <button class="btn btn-danger" data-dismiss="modal" id="clearTablesSubmit">Yes</button>
              </div>
        </div>
    </div>
</div>
<!-- END MODAL FOR TABLES CLEARING -->
<!-- THIS IS OUR MODAL FOR TABLES CLEARING -->
<div class="modal fade bs-example-modal-sm" id="clearOperationalFilesModal" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3>Are you sure?</h3>
            </div>
              <div class="modal-body" id="clearOperationalFilesBody">
                  This will remove all files in the "payloads/operations" folder! This cannot be undone!
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <button class="btn btn-danger" data-dismiss="modal" id="clearOperationalFilesSubmit">Yes</button>
              </div>
        </div>
    </div>
</div>
<!-- END MODAL FOR TABLES CLEARING -->
{% endblock %}

{% block scripts %}
{% include "database_management.js" %}
{% include "shared_javascript.js" %}
{% endblock %}